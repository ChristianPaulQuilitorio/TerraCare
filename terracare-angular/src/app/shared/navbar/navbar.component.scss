/* Material toolbar-based navbar with TerraCare white/green design */
.navbar-shell { display:block; }
.navbar {
  padding: 0 16px;
  background: #ffffff;
  color: #2c3e50;
  border-bottom: 1px solid #eef2ee;
  position: relative;
  z-index: 10;
}
.menu-button { margin-right: 8px; display:inline-flex; align-items:center; justify-content:center; }
.navbar-logo { display: inline-flex; align-items: center; text-decoration: none; }
.navbar-logo .logo-img { width: 40px; height: 40px; object-fit: contain; border-radius: 6px; }
.spacer { flex: 1 1 auto; }

.navbar-links { display: flex; gap: 4px; margin: 0 16px; padding: 0; list-style: none; }
.navbar-links li { display: flex; }
.navbar-links li a[mat-button] {
  color: #2c3e50;
  border-radius: 8px;
}
.navbar-links li a[mat-button]:hover,
.navbar-links li a.active {
  background: #E8F5E9; /* light green */
  color: #2E7D32;      /* TerraCare green */
}

.navbar-actions { display: flex; align-items: center; gap: 8px; }

/* TerraCare button styles used in navbar */
.tc-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 8px 14px;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 600;
  line-height: 1;
}
.tc-btn.tc-primary { background: #2E7D32; color: #fff; }
.tc-btn.tc-primary:hover { background: #256628; color: #fff; }
.tc-btn.tc-outline { border: 2px solid #2E7D32; color: #2E7D32; background: transparent; }
.tc-btn.tc-outline:hover { background: #E8F5E9; }

@media (max-width: 840px) {
  .navbar-links { display: none; }
  .mobile-drawer { width: 260px; }
  .navbar { padding-left: 4px; }
  .menu-button { margin-left: 4px; }
  .navbar-actions { display: none; }
}

/* Smaller screens: make logo and buttons slightly larger/tappable and ensure menu is visible */
@media (max-width: 480px) {
  .navbar-logo .logo-img { width: 36px; height: 36px; }
  .menu-button { width: 44px; height: 44px; border-radius: 8px; }
  .navbar { padding: 8px 10px; }
  .navbar-links { display: none; }
}

/* Ensure burger stays above content */
.navbar { z-index: 4000; position: relative; }

/* Ensure mobile sidenav and its backdrop/scrim always overlay page content */
.navbar-shell { position: relative; }
.navbar-shell .mat-drawer-backdrop,
.navbar-shell .mat-mdc-sidenav-scrim {
  /* Make the scrim cover the whole viewport, not just the toolbar height */
  position: fixed;
  inset: 0;
  z-index: 2147483646 !important; /* sit above everything except the drawer */
  background: rgba(0, 0, 0, 0.5); /* darker, consistent overlay */
}
.navbar-shell .mat-drawer,
.navbar-shell .mat-mdc-sidenav {
  /* Make the drawer float over the entire app */
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  z-index: 2147483647 !important; /* max practical value */
}

/* Extra safeguard: when drawer is open, elevate container and apply isolation to prevent underlying stacking contexts from bleeding through */
.navbar-shell.drawer-open {
  position: fixed;
  inset: 0;
  z-index: 2147483645; /* below drawer & scrim but above all page content */
  pointer-events: none; /* allow interactions only with drawer/scrim */
}
.navbar-shell.drawer-open .mat-drawer,
.navbar-shell.drawer-open .mat-mdc-sidenav,
.navbar-shell.drawer-open .mat-drawer-backdrop,
.navbar-shell.drawer-open .mat-mdc-sidenav-scrim {
  pointer-events: auto;
}

/* Hide main navbar when a dialog is open to avoid z-index and clipping issues */
body.tc-dialog-open .navbar-shell { display: none !important; }
